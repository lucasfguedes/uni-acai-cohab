<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" href="assets/img/logo.png" type="image/x-icon">
    <link rel="shortcut icon" href="assets/img/logo.png" type="image/x-icon">
    <title>Uni Açaí - Cohab</title>
</head>

<script>
    // Verifica se o usuário está logado
    document.addEventListener("DOMContentLoaded", () => {
    const usuarioLogado = JSON.parse(localStorage.getItem('usuario'));
    const loginLink = document.querySelector("a[href='user_page_login.html']");
    
        if (usuarioLogado) {
            loginLink.innerHTML = `<span>Minha Conta (${usuarioLogado.nome})</span>`;
            loginLink.href = "minha_conta.html"; 
        }
    });

</script>
<script>
    console.log('Script carregado!');
</script>
<body>
        <!-- Modal do Carrinho -->
    <div id="carrinho-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Seu Carrinho</h2>
            <div id="carrinho-itens"></div>
            <p>Total: R$ <span id="carrinho-total">0,00</span></p>
            <button onclick="finalizarPedido()">Finalizar Pedido</button>
        </div>
    </div>

    <header>
        <div class="logo">
            <a href="index.html">
                <img src="assets/img/logo.png" alt="Logo do Site" />
            </a>
        </div>
        <a href="index.html" class="titulo">Uni Açaí Cohab</a>
        <nav class="main-nav">
            <a href="https://api.whatsapp.com/send/?phone=%2B5518996228285&text&type=phone_number&app_absent=0">
                <img class="icones" src="assets/img/whatsapp.png" alt="Ícone do WhatsApp" />
            </a>
            <a href="user_page_login.html">
                <img class="icones" src="assets/img/do-utilizador.png" alt="Ícone de Conta" />
            </a>
            <!-- Ícone do Carrinho -->
            <a href="#" id="carrinho-icon">
                <img class="icones" src="assets/img/bolsa-de-compras.png" alt="Ícone do Carrinho" />
                <span id="carrinho-count">0</span>
            </a>
        </nav>
    </header>
    <main>
        <!-- Barra de pesquisa -->
        <div class="search-container">
            <form action="/buscar" method="GET">
                <input type="search" name="query" class="search-input" placeholder="Buscar no Cardápio" required>
                <button type="submit" class="search-button">Buscar</button>
            </form>
        </div>
    
        <!-- Botões principais -->
        <div class="button-container">
            <button class="styled-button" onclick="window.location.href='novos-combinados.html'">NOVOS COMBINADOS</button>
        </div>
    
        <!-- Seção Milkshakes -->
        <h2>Milkshakes</h2>
        <div class="flex-container" id="milkshake-container"></div>
    
        <!-- Seção Sorvetes -->
        <h2>Casadinhos</h2>
        <div class="flex-container" id="casadinhos-container"></div>
    
    </main>
    

    
    <footer class="footer">
        <div class="footer-nav">
            <a href="sobre.html" aria-label="Saiba mais sobre a loja">Sobre a Loja</a>
            <a href="https://g.page/r/CTMCMx6IrbRbEAE/review" aria-label="Leia ou escreva avaliações">Avaliações</a>
            <a href="https://api.whatsapp.com/send/?phone=%2B5518996228285&text&type=phone_number&app_absent=0" aria-label="Entre em contato pelo WhatsApp">Contato</a>
        </div>
        <div class="footer-social">
            <a href="https://facebook.com" target="_blank" aria-label="Facebook">Facebook</a>
            <a href="https://instagram.com" target="_blank" aria-label="Instagram">Instagram</a><br><br>
            <a href="#horarios" aria-label="Veja os horários de funcionamento">Seg - Dom 14:00 - 23:00</a>
            <a href="trabalhe_conosco.html">Trabalhe conosco</a>
            <a href="https://www.linkedin.com/in/lucasfguedes00/">Criador do Site</a>
        </div>
    </footer>

    <script>
        console.log('Script carregado!'); // Verifica se o script está sendo carregado
    
        let carrinho = [];
        let total = 0;
    
        // Verifica se o ícone do carrinho existe antes de adicionar o evento
        const carrinhoIcon = document.getElementById('carrinho-icon');
        if (carrinhoIcon) {
            carrinhoIcon.addEventListener('click', (e) => {
                e.preventDefault(); // Impede o comportamento padrão do link
                document.getElementById('carrinho-modal').style.display = 'block';
                atualizarCarrinho();
            });
        }
    
        // Verifica se o botão de fechar o modal existe antes de adicionar o evento
        const closeButton = document.querySelector('.close');
        if (closeButton) {
            closeButton.addEventListener('click', () => {
                document.getElementById('carrinho-modal').style.display = 'none';
            });
        }
    
        // Função para adicionar itens ao carrinho
        function adicionarAoCarrinho(nome, preco) {
            carrinho.push({ nome, preco });
            total += preco;
            atualizarCarrinho();
        }
    
        // Função para atualizar o carrinho
        function atualizarCarrinho() {
            const carrinhoItens = document.getElementById('carrinho-itens');
            const carrinhoTotal = document.getElementById('carrinho-total');
            const carrinhoCount = document.getElementById('carrinho-count');

            carrinhoItens.innerHTML = '';
            let total = 0;

            carrinho.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add("carrinho-item");
                itemDiv.innerHTML = `
                    <p>${item.nome} - R$ ${item.preco.toFixed(2)}</p>
                    <button onclick="removerDoCarrinho(${index})">Remover</button>
                `;
                carrinhoItens.appendChild(itemDiv);
                total += item.preco;
            });

            carrinhoTotal.textContent = total.toFixed(2);
            carrinhoCount.textContent = carrinho.length;
        }

        // Função para remover item do carrinho
        function removerDoCarrinho(index) {
            carrinho.splice(index, 1);
            atualizarCarrinho();
        }

    
        // Função para finalizar o pedido
        function finalizarPedido() {
            if (carrinho.length === 0) {
                alert('Seu carrinho está vazio!');
                return;
            }
            alert('Pedido finalizado! Total: R$ ' + total.toFixed(2));
            imprimirPedido();
            carrinho = [];
            total = 0;
            atualizarCarrinho();
        }
    
        // Função para imprimir o pedido (simulação)
        function imprimirPedido() {
            const pedido = carrinho.map(item => `${item.nome} - R$ ${item.preco.toFixed(2)}`).join('\n');
            console.log('Pedido enviado para impressão:\n' + pedido + '\nTotal: R$ ' + total.toFixed(2));
        }
    </script>
    <script>
        const ProdutosMilkshake = [
            {
                nome: "Milk de Paçoca",
                descricao: "Milk de paçoca com leite.",
                preco: "A partir de R$ 13,00",
                imagem: "assets/img/01_Uniaçaí_fotos_milkshakes_Ifood_PAÇOCA.png"
            },
            {
                nome: "Açaí Tradicional",
                descricao: "Delicioso açaí batido com guaraná.",
                preco: "A partir de R$ 10,00",
                imagem: "assets/img/acai_tradicional.png"
            }
        ];

        const produtosCasadinhos = [
            {
                nome: "Sorvete de Chocolate",
                descricao: "Sorvete cremoso sabor chocolate.",
                preco: "A partir de R$ 8,00",
                imagem: "assets/img/sorvete_chocolate.png"
            },
            {
                nome: "Sorvete de Morango",
                descricao: "Sorvete de morango natural.",
                preco: "A partir de R$ 8,00",
                imagem: "assets/img/sorvete_morango.png"
            }
        ];

        
        function gerarProdutos(produtos, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = ""; // Limpa o conteúdo antes de adicionar os produtos

            produtos.forEach(produto => {
                const card = document.createElement("div");
                card.classList.add("card");

                card.innerHTML = `
                    <div class="image-container">
                        <img src="${produto.imagem}" alt="${produto.nome}">
                    </div>
                    <div class="content">
                        <h2>${produto.nome}</h2>
                        <p>${produto.descricao}</p>
                        <p class="price">${produto.preco}</p>
                        <button class="add-to-cart">Adicionar ao Carrinho</button>
                    </div>
                `;

                // Adiciona o evento de clique ao botão
                const botao = card.querySelector(".add-to-cart");
                botao.addEventListener("click", () => {
                    const precoNumerico = parseFloat(produto.preco.replace("A partir de R$ ", "").replace(",", "."));
                    adicionarAoCarrinho(produto.nome, precoNumerico);
                });

                container.appendChild(card);
            });
        }


        // Gera os produtos automaticamente ao carregar a página
        document.addEventListener("DOMContentLoaded", function() {
            gerarProdutos(ProdutosMilkshake, "milkshake-container");
            gerarProdutos(produtosCasadinhos, "casadinhos-container");
        });

    </script>
</body>
</html>
    
